<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:pass="http://xmlns.jcp.org/jsf/passthrough">

    <p:remoteCommand name="setRowIndex" process="@this" global="false" actionListener="#{supInvoiceController.setRowIndex}"/> 

    <!-- page start-->
    <p:growl id="msgs" widgetVar="growl"/>
    <div class="row form-header-1">
        <div class="col-md-12" >
            <p:commandLink class="form-nav" value="#{messages.VendorBills}" process="@this" actionListener="#{supInvoiceController.showInvoiceList}" update=":InvoiceForm:content"/>
            <span> / </span>
            <span>#{messages.New}</span>
        </div>
    </div> 
    <div class="row form-header-3" >
        <div class="col-md-6 record-status-buttons">             
            <p:commandButton class="btnn btnn-primary" value="#{messages.Save}" process=":InvoiceForm:content" actionListener="#{supInvoiceController.createInvoice}"  update=":InvoiceForm:content" /> 
            <p:commandButton class="btnn btnn-default" value="#{messages.Discard}" process="@this" actionListener="#{supInvoiceController.showInvoiceList}"  update=":InvoiceForm:content" /> 
        </div>
        <div class="col-md-6 bread-crumb" >    
            <div class="breadcrumbs flat">              
                <a class="active">#{messages.Draft}</a>
                <a>#{messages.Open}</a>
                <a>#{messages.Paid}</a>
            </div>
        </div>
    </div>
    <div class="row form-body">                   
        <div class="row form-line-1">
            <div class="col-md-12" >
                <h:outputText id="name" value="#{messages.DraftBill}"/> 
            </div>
        </div>
        <div class="row form-row">
            <div class="col-md-2point5 form-label">
                <p:outputLabel value="#{messages.Vendor}" for="partnerMenu" />
            </div> 
            <div class="col-md-4">
                <p:selectOneMenu class="fullWidth required" onchange="showPartnerList();" id="partnerMenu" widgetVar="partnerMenu" value="#{supInvoiceController.invoice.partner}" required="true" requiredMessage="#{messages.VendorRequired}" converter="partnerConverter">   
                    <f:selectItem  itemLabel="&#160;" />
                    <f:selectItems value="#{supInvoiceController.topNSuppliers}"
                                   var="partner"
                                   itemValue="#{partner}"
                                   itemLabel="#{partner.name.toString()}"/>
                    <f:selectItem itemLabel="#{messages.SearchMore}" itemValue=""/>
                </p:selectOneMenu>
            </div>
            <div class="col-md-2 form-label">
                <p:outputLabel value="#{messages.BillDate}" for="orderDate" />
            </div>
            <div class="col-md-3point5 ">
                <p:calendar id="orderDate" class="required" widgetVar="orderDate" pattern="MM-dd-yyyy" value="#{supInvoiceController.invoice.date}"  required="true" requiredMessage="#{messages.DateRequired}" converterMessage="#{messages.InvalidDate}" locale="#{messages.CalendarLanguage}"/>
            </div>
        </div>
        <div class="row form-row">
            <div class="col-md-2point5 form-label">
                <p:outputLabel value="#{messages.VendorReference}"/>
            </div> 
            <div class="col-md-4">
                <p:inputText value="#{supInvoiceController.invoice.reference}" maxlength="30"/>
            </div>
        </div>
        <div class="row"  style="padding-left: 15px;padding-right: 15px; margin-bottom:10px">
            <div class="col-md-12" >
                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a href="#form-tab-1" class="form-tab" role="tab" data-toggle="tab">#{messages.BillLines}</a></li>
                    <li><a href="#form-tab-2" class="form-tab" role="tab" data-toggle="tab">#{messages.OtherInfo}</a></li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active" id="form-tab-1" style="padding: 10px;">
                        <div jsf:id="orderLines">
                            <p:dataTable class="datalist"
                                         rowIndexVar="rowIndex" 
                                         rowStyleClass="no-color"
                                         id="datalist" 
                                         var="item" 
                                         value="#{supInvoiceController.invoiceLines}" 
                                         editable="true">

                                <p:ajax event="rowEditInit" global="false"  listener="#{supInvoiceController.onRowEditInit(item)}" onstart="hideTableButtons(); hideAdd();" />  
                                <p:ajax event="rowEdit" listener="#{supInvoiceController.onRowEdit(rowIndex)}"  update=":InvoiceForm:OrderTotal :InvoiceForm:msgs" oncomplete="if(args.validationFailed){hideTableButtons(); hideAdd();}else{showTableButtons(); showAdd();}"/>
                                <p:ajax event="rowEditCancel" listener="#{supInvoiceController.onRowCancel(rowIndex)}" oncomplete="showTableButtons(); showAdd();" />

                                <p:column style="width:55px;"> 
                                    <div style="display: inline-block;">
                                        <p:commandLink styleClass="ui-icon ui-icon-trash" process="@this"  update=":InvoiceForm:orderLines" actionListener="#{supInvoiceController.onRowDelete(rowIndex)}"/> 
                                    </div>
                                    <p:rowEditor/>
                                </p:column>

                                <p:column  headerText="#{messages.Product}">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{item.product.description}"/></f:facet>
                                        <f:facet name="input"><p:selectOneMenu styleClass="required" onchange="showProductList('#{rowIndex}');" id="productMenu"  widgetVar="productMenu_#{rowIndex}" value="#{item.product}"  required="true" requiredMessage="#{messages.ProductRequired}"  converter="productConverter" style="width:100%">
                                                <p:ajax resetValues="true" global="false" process="@this" listener="#{supInvoiceController.onProductChange(rowIndex)}" update=":InvoiceForm:datalist:pricee" />
                                                <f:selectItem itemLabel="&#160;"/>
                                                <f:selectItems value="#{supInvoiceController.topPurchasedNProducts}"
                                                               var="product"
                                                               itemValue="#{product}"
                                                               itemLabel="#{product.description.toString()}"/>
                                                <f:selectItem itemLabel="#{messages.SearchMore}" itemValue=""/>
                                            </p:selectOneMenu>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column  headerText="#{messages.Quantity}">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{item.quantity}" /></f:facet>
                                        <f:facet name="input">
                                            <p:spinner value="#{item.quantity}" 
                                                                       styleClass="required" 
                                                                       id="firstQuantity"  
                                                                       min="0" 
                                                                       size="10"
                                                                       stepFactor="#{messages.stepFactor}"  
                                                                       required="true" 
                                                                       requiredMessage="#{messages.QuantityRequired}" 
                                                                       converterMessage="#{messages.InvalidQuantity}"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column headerText="#{messages.UnitPrice}">
                                    <p:cellEditor>
                                        <f:facet name="output">
                                            #{messages.Currency}
                                            <h:outputText value="#{item.price}"/>
                                        </f:facet>
                                        <f:facet name="input">
                                           <p:spinner value="#{item.price}" 
                                                       id="pricee"
                                                       class="required"
                                                       required="true" 
                                                       min="0"                                                                       
                                                       stepFactor="#{messages.stepFactor}"                                                  
                                                       size="12"                                                        
                                                       requiredMessage="#{messages.PriceRequired}" 
                                                       converterMessage="#{messages.InvalidPrice}"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column headerText="#{messages.Tax}">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{item.tax.name}" /></f:facet>
                                        <f:facet name="input"><p:selectOneMenu  value="#{item.tax}"  converter="taxConverter" style="width:100%">
                                                <f:selectItem  itemLabel="&#160;" />
                                                <f:selectItems value="#{taxController.purchaseTaxes}"
                                                               var="tax"
                                                               itemValue="#{tax}"
                                                               itemLabel="#{tax.name.toString()}"
                                                               />

                                            </p:selectOneMenu>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column headerText="#{messages.SubTotal}">
                                    <p:cellEditor>
                                        <f:facet name="output">
                                            #{messages.Currency}
                                            <h:outputText value="#{item.priceSubtotal}"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            #{messages.Currency}
                                            <h:outputText value="#{item.priceSubtotal}"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>   
                            </p:dataTable>


                            <div id="addrow" class="ui-datatable ui-widget datalist">
                                <div class="ui-datatable-tablewrapper">
                                    <table jsf:id="row" role="grid">
                                        <tbody  class="ui-datatable-data ui-widget-content">
                                            <tr data-ri="0" class="ui-widget-content ui-datatable-even ui-state-highlight ui-row-editing" role="row">
                                                <td role="gridcell" style="width:55px">
                                                    <div  class="ui-row-editor ui-helper-clearfix">
                                                        <div style="display: inline-block; ">
                                                            <p:commandLink styleClass="ui-icon ui-icon-check" process=":InvoiceForm:row" update=":InvoiceForm:orderLines :InvoiceForm:msgs" actionListener="#{supInvoiceController.onRowAdd}" oncomplete="hiderow('addrow','add',args);"/>
                                                        </div>
                                                        <div style="display: inline-block; margin-left: -5px">  
                                                            <p:commandLink styleClass="ui-icon ui-icon-close" global="false"  resetValues="true"  process="@this" update=":InvoiceForm:row" onclick="hiderow('addrow', 'add');
                                                                    showTableButtons();" actionListener="#{supInvoiceController.onRowCancel}"/>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td role="gridcell" class="ui-editable-column">
                                                    <div  class="ui-cell-editor">
                                                        <div class="ui-cell-editor-input">
                                                            <p:selectOneMenu onchange="showProductListTwo();" styleClass="required" id="productMenuTwo" widgetVar="productMenuTwo" value="#{supInvoiceController.invoiceLine.product}" required="true" requiredMessage="#{messages.ProductRequired}"  converter="productConverter" style="width:100%">
                                                                <p:ajax resetValues="true" global="false" listener="#{supInvoiceController.onProductChange}" process="@this" update=":InvoiceForm:price" />
                                                                <f:selectItem itemLabel="&#160;"/>
                                                                <f:selectItems value="#{supInvoiceController.topPurchasedNProducts}"
                                                                               var="product"
                                                                               itemValue="#{product}"
                                                                               itemLabel="#{product.description.toString()}"/>
                                                                <f:selectItem itemLabel="#{messages.SearchMore}" itemValue=""/>
                                                            </p:selectOneMenu> 
                                                        </div>
                                                    </div>
                                                </td>
                                                <td role="gridcell" class="ui-editable-column">
                                                    <div  class="ui-cell-editor">
                                                        <div class="ui-cell-editor-input">
                                                            <p:spinner value="#{supInvoiceController.invoiceLine.quantity}" 
                                                                       styleClass="required" 
                                                                       id="secondQuantity"  
                                                                       min="0" 
                                                                       size="10"
                                                                       stepFactor="#{messages.stepFactor}"  
                                                                       required="true" 
                                                                       requiredMessage="#{messages.QuantityRequired}" 
                                                                       converterMessage="#{messages.InvalidQuantity}"/>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td role="gridcell" class="ui-editable-column">
                                                    <div  class="ui-cell-editor">
                                                        <div class="ui-cell-editor-input">
                                                           <p:spinner value="#{supInvoiceController.invoiceLine.price}" 
                                                                       id="price"
                                                                       class="required"
                                                                       required="true" 
                                                                       min="0"                                                                       
                                                                       stepFactor="#{messages.stepFactor}"                                                  
                                                                       size="12"                                                        
                                                                       requiredMessage="#{messages.PriceRequired}" 
                                                                       converterMessage="#{messages.InvalidPrice}"/>
                                                        </div>
                                                    </div>
                                                </td>
                                                
                                                <td role="gridcell" class="ui-editable-column">
                                                    <div  class="ui-cell-editor">
                                                        <div class="ui-cell-editor-input">
                                                            <p:selectOneMenu id="tax"  value="#{supInvoiceController.invoiceLine.tax}" converter="taxConverter" style="width:100%">
                                                                <f:selectItem  itemLabel="&#160;" />
                                                                <f:selectItems value="#{taxController.purchaseTaxes}"
                                                                               var="tax"
                                                                               itemValue="#{tax}"
                                                                               itemLabel="#{tax.name.toString()}"
                                                                               />
                                                            </p:selectOneMenu>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td role="gridcell" class="ui-editable-column">
                                                    <div  class="ui-cell-editor">
                                                        <div class="ui-cell-editor-input">
                                                            #{messages.Currency}
                                                            <h:outputText id="subTotal" value="#{supInvoiceController.invoiceLine.priceSubtotal}" style="width:100%"/>     
                                                        </div>
                                                    </div>
                                                </td>

                                            </tr></tbody></table></div></div>

                            <div id="extraLines">
                                <div class="ui-datatable ui-widget datalist">
                                    <div class="ui-datatable-tablewrapper">
                                        <table role="grid">
                                            <tbody  class="ui-datatable-data ui-widget-content">
                                                <tr>
                                                    <td style="text-align: left !important;">
                                                        <a style="display: inline;"  id="add" onclick="showRow();
                                                                hideTableButtons();">#{messages.AddAnItem}</a>
                                                        &#160;
                                                    </td>
                                                </tr>
                                                <tr jsf:rendered="#{supInvoiceController.invoiceLines.size() lt 3}">
                                                    <td>&#160;</td>
                                                </tr>
                                            </tbody>
                                            <tfoot class="tableFoot"><td><tr></tr></td></tfoot>
                                        </table></div></div>
                            </div>  

                            <div jsf:id="OrderTotal" style="text-align: right; padding-right: 15px;"> 
                                <div class="row" style="margin-top: 26px; font-size: 15px; padding-bottom:5px;">
                                    <div class="col-md-4 col-md-offset-6">
                                        <h:outputText value="#{messages.UntaxedAmount}"/>
                                    </div> 
                                    <div class="col-md-2" style="padding-right:0px;">
                                        #{messages.Currency}
                                        <h:outputText id="amountUntaxed" value="#{supInvoiceController.invoice.amountUntaxed}"/>                       
                                    </div>
                                </div>
                                <div class="row" style="font-size: 15px; padding-bottom:5px;">
                                    <div class="col-md-2 col-md-offset-8">
                                        <h:outputText value="#{messages.Taxes}"/>
                                    </div> 
                                    <div class="col-md-2" style="padding-right:0px;">
                                        #{messages.Currency}
                                        <h:outputText id="amountTax" value="#{supInvoiceController.invoice.amountTax}"/>
                                    </div>
                                </div>
                                <div class="row" style="font-size: 20px;">
                                    <div class="col-md-2 col-md-offset-8 form-label-2">
                                        <h:outputText value="#{messages.Totall}"/>
                                    </div> 
                                    <div class="col-md-2 form-label-2" style="padding-right:0px">
                                        #{messages.Currency}
                                        <h:outputText id="amountTotal" value="#{supInvoiceController.invoice.amountTotal}"/>
                                    </div>
                                </div> 
                            </div>
                        </div>                     
                        <div class="row">
                            <div class="col-md-12">
                                <p:inputTextarea rows="4" cols="50" id="notes" value="#{supInvoiceController.invoice.comment}" placeholder="#{messages.TermsAndConditions}" autoResize="false"/>
                            </div> 
                        </div> 
                    </div>
                   <div class="tab-pane" id="form-tab-2" style="padding-top: 20px; padding-bottom: 40px;">

                        <div class="row form-row">
                            <div class="col-md-2point5 form-label">
                                <p:outputLabel value="#{messages.Journal}" for="invoiceJournal"/>
                            </div> 
                            <div class="col-md-4">
                                <p:selectOneMenu id="invoiceJournal" class="fullWidth required" value="#{supInvoiceController.invoice.journal}" required="true" requiredMessage="#{messages.JournalRequired}" converter="journalConverter">   
                                    <f:selectItem  itemLabel="&#160;" />
                                    <f:selectItems value="#{journalController.billJournals}"
                                                   var="journal"
                                                   itemValue="#{journal}"
                                                   itemLabel="#{journal.name.toString()}"/>
                                </p:selectOneMenu>
                            </div>
                            <div class="col-md-2 form-label">
                               <p:outputLabel value="#{messages.Account}" for="invoiceAccount"/>
                            </div>
                            <div class="col-md-3point5 ">
                                <p:selectOneMenu id="invoiceAccount" class="fullWidth required"  value="#{supInvoiceController.invoice.account}" required="true" requiredMessage="#{messages.AccountRequired}" converter="accountConverter" >   
                                    <f:selectItem  itemLabel="&#160;" />
                                    <f:selectItems value="#{accountController.billAccounts}"
                                                   var="account"
                                                   itemValue="#{account}"
                                                   itemLabel="#{account.name.toString()}"/>
                                </p:selectOneMenu>
                            </div>
                        </div>

                        <div class="row" style="padding-bottom: 15px; margin-bottom:10px; padding-top: 15px;">
                            <div class="col-md-12">

                                <p:dataTable id="invoiceTaxes"
                                             binding="#{invoiceTaxesss}"
                                             class="fit-content-table"
                                             value="#{supInvoiceController.invoice.invoiceTaxes}"
                                             var="item"
                                             rowKey="#{item.id}">
                                    
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value=""/>
                                        </f:facet>
                                        <h:outputText value=""/>
                                    </p:column>

                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{messages.TaxDescription}"/>
                                        </f:facet>
                                        <h:outputText value="#{item.tax.name}"/>
                                    </p:column>

                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{messages.TaxAccount}"/>
                                        </f:facet>
                                        <h:outputText value="#{item.account.name}"/>
                                    </p:column>

                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{messages.BaseAmount}"/>
                                        </f:facet>
                                        #{messages.Currency}
                                        <h:outputText value="#{item.baseAmount}"/>
                                    </p:column>

                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{messages.TaxAmount}"/>
                                        </f:facet>
                                        #{messages.Currency}
                                        <h:outputText value="#{item.taxAmount}"/>
                                    </p:column>
                                </p:dataTable>
                            </div>
                        </div>                
                    </div>
                </div>
            </div>
        </div>
    </div> 

      <p:dialog id="PartnerListDialog" modal="true" styleClass="disable-scroll item-select-dialog" widgetVar="PartnerList"  resizable="false" closable="true"  appendTo="@(body)"  header="#{messages.SearchVendor}" width="#{messages.ItemSelectDialogWidth}" closeOnEscape="true">
        <h:form>
            
            <p:dataTable id="PartnerTable"
                         class="fit-content-table"
                         binding="#{partners}"
                         value="#{vendorController.vendorList}"  
                         filteredValue="#{vendorController.filteredPartners}"
                         var="item"
                         rowKey="#{item.id}"
                         paginator="true"
                         paginatorAlwaysVisible="true"
                         paginatorPosition="top"
                         selection="#{supInvoiceController.supplier}"
                         selectionMode="single"
                         widgetVar="PartnerTable"
                         rows="#{messages.DialogMaxRows}">

                <f:facet name="header">
                    <p:outputPanel>
                        <div class="searchLoader">
                            <p:graphicImage  name="/img/search-loader.gif"/>
                        </div>
                        <input type="text" jsf:id="globalFilter" jsf:onkeyup="PF('PartnerTable').filter()" class="search" placeholder="#{messages.Search}"/>               
                    </p:outputPanel>
                </f:facet>
                
                <p:ajax event="page" oncomplete="updateTable(partnersTableId);"/>
                <p:ajax event="sort" oncomplete="updateTable(partnersTableId);"/>
                <p:ajax event="filter" global="false" onstart="showSearchLoader();" oncomplete="updateTable(partnersTableId); hideSearchLoader();"/>      
                <p:ajax event="rowSelect" resetValues="true"  listener="#{supInvoiceController.onSelectSupplier}" onstart="PF('PartnerList').hide(); PF('PartnerTable').clearFilters();" update=":InvoiceForm:partnerMenu"/>

                
                 <p:column>
                    <f:facet name="header">
                        <h:outputText value=""/>
                    </f:facet>
                    <h:outputText value=""/>
                </p:column>

                <p:column sortBy="#{item.name}" filterBy="#{item.name}">
                    <f:facet name="header">
                        <h:outputText value="#{messages.Name}"/>
                    </f:facet>
                    <h:outputText value="#{item.name}"/>
                </p:column>
                <p:column sortBy="#{item.phone}" filterBy="#{item.phone}">
                    <f:facet name="header">
                        <h:outputText value="#{messages.Phone}"/>
                    </f:facet>
                    <h:outputText value="#{item.phone}"/>
                </p:column>
                <p:column sortBy="#{item.email}" filterBy="#{item.email}">
                    <f:facet name="header">
                        <h:outputText value="#{messages.Email}"/>
                    </f:facet>
                    <h:outputText value="#{item.email}"/>
                </p:column>

            </p:dataTable>
        </h:form>
    </p:dialog>


     <p:dialog id="ProductListDialog" modal="true" styleClass="disable-scroll item-select-dialog" widgetVar="ProductList"  resizable="false" closable="true"  appendTo="@(body)" header="#{messages.SearchProduct}" width="#{messages.ItemSelectDialogWidth}" closeOnEscape="true">
        <h:form>
            
            <p:dataTable id="ProductTable"
                         value="#{productController.purchasedProducts}"
                         class="fit-content-table"
                         binding="#{products}"
                         filteredValue="#{productController.filteredProducts}"
                         var="item"
                         rowKey="#{item.id}"
                         paginator="true"
                         paginatorAlwaysVisible="true"
                         paginatorPosition="top"
                         selection="#{supInvoiceController.product}"
                         selectionMode="single"
                         widgetVar="ProductTable"
                         rows="#{messages.DialogMaxRows}">

                <f:facet name="header">
                    <p:outputPanel>
                        <div class="searchLoader">
                            <p:graphicImage  name="/img/search-loader.gif"/>
                        </div>
                        <input type="text" jsf:id="globalFilter" jsf:onkeyup="PF('ProductTable').filter()" class="search" placeholder="#{messages.Search}"/>               
                    </p:outputPanel>
                </f:facet>
                
                <p:ajax event="page" oncomplete="updateTable(productsTableId);"/>
                <p:ajax event="sort" oncomplete="updateTable(productsTableId);"/>
                <p:ajax event="filter" global="false" onstart="showSearchLoader();" oncomplete="updateTable(productsTableId); hideSearchLoader();"/>           
                <p:ajax event="rowSelect" process="@this" resetValues="true" listener="#{supInvoiceController.onSelectProduct}" onstart="PF('ProductList').hide(); PF('ProductTable').clearFilters();"/>
                
                 <p:column>
                    <f:facet name="header">
                        <h:outputText value=""/>
                    </f:facet>
                    <h:outputText value=""/>
                </p:column>

               <p:column sortBy="#{item.name}" filterBy="#{item.name}">
                    <f:facet name="header">
                        <h:outputText value="#{messages.Name}"/>
                    </f:facet>
                    <h:outputText value="#{item.name}"/>
                </p:column>
                <p:column sortBy="#{item.defaultCode}" filterBy="#{item.defaultCode}">
                    <f:facet name="header">
                        <h:outputText value="#{messages.InternalReference}"/>
                    </f:facet>
                    <h:outputText value="#{item.defaultCode}"/>
                </p:column>
                <p:column sortBy="#{item.purchasePrice}" filterBy="#{item.purchasePrice}">
                    <f:facet name="header">
                        <h:outputText value="#{messages.PurchasePrice}"/>
                    </f:facet>
                    #{messages.Currency}
                    <h:outputText value="#{item.purchasePrice}"/>                
                </p:column>
                <p:column sortBy="#{item.inventory.quantityOnHand}" filterBy="#{item.inventory.quantityOnHand}">
                    <f:facet name="header">
                        <h:outputText value="#{messages.QuantityOnHand}"/>
                    </f:facet>
                    <h:outputText value="#{item.inventory.quantityOnHand}"/>
                </p:column>
                <p:column sortBy="#{item.inventory.quantityAvailable}" filterBy="#{item.inventory.quantityAvailable}">
                    <f:facet name="header">
                        <h:outputText value="#{messages.ForecastedQuantity}"/>
                    </f:facet>
                    <h:outputText value="#{item.inventory.quantityAvailable}"/>
                </p:column>
                <p:column sortBy="#{item.uom.name}" filterBy="#{item.uom.name}">
                    <f:facet name="header">
                        <h:outputText value="#{messages.UnitOfMeasure}"/>
                    </f:facet>
                    <h:outputText value="#{item.uom.name}"/>
                </p:column>
                
            </p:dataTable>
        </h:form>
    </p:dialog>

    <script>

        $("#InvoiceForm\\:partnerMenu_input option:first-of-type").attr("value", "");
        $("#InvoiceForm\\:productMenuTwo_input option:first-of-type").attr("value", "");

        function showPartnerList() {
            $("#InvoiceForm\\:partnerMenu_input option:first-of-type").attr("value", "");
            if (PF('partnerMenu').getSelectedLabel() === '#{messages.SearchMore}') {
                PF('partnerMenu').selectValue('');
                PF('PartnerList').show();
            }
        }

        function showProductList(index) {
            $("#InvoiceForm\\:datalist\\:" + index + "\\:productMenu_input option:first-of-type").attr("value", "");
            if (PF('productMenu_' + index).getSelectedLabel() === '#{messages.SearchMore}') {
                PF('productMenu_' + index).selectValue('');
                setRowIndex([{name: 'rowIndex', value: index}]);
                PF('ProductList').show();
            }
        }

        function showProductListTwo() {
            $("#InvoiceForm\\:productMenuTwo_input option:first-of-type").attr("value", "");
            if (PF('productMenuTwo').getSelectedLabel() === '#{messages.SearchMore}') {
                PF('productMenuTwo').selectValue('');
                setRowIndex([{name: 'rowIndex', value: '-1'}]);
                PF('ProductList').show();
            }
        }
        
        setListURL();
         
        function updateTable(tableId) {
            addEmptyRows(tableId);
        }
        
        var invoiceTaxesssTableId = '#{invoiceTaxesss.clientId}';
        var productsTableId = '#{products.clientId}';
        var partnersTableId = '#{partners.clientId}';
        
        addEmptyRow(invoiceTaxesssTableId);
        addEmptyRows(productsTableId);
        addEmptyRows(partnersTableId);
        
        disableStatusLinks();
        
        setActiveTab();

    </script>
</ui:composition>